"use strict";(()=>{var e={};e.id=175,e.ids=[175],e.modules={1185:e=>{e.exports=require("mongoose")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9373:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>_,originalPathname:()=>x,patchFetch:()=>q,requestAsyncStorage:()=>h,routeModule:()=>S,serverHooks:()=>f,staticGenerationAsyncStorage:()=>b,staticGenerationBailout:()=>v});var i={};r.r(i),r.d(i,{GET:()=>y,dynamic:()=>m});var a=r(5419),n=r(9108),o=r(9678),s=r(8070),u=r(7033),c=r(1452);r(6659);var l=r(1185),p=r.n(l);let d=new(p()).Schema({name:{type:String,required:!0},icon:String});p().models.Amenity||p().model("Amenity",d);let g=new(p()).Schema({name:{type:String,required:!0}});p().models.Feature||p().model("Feature",g);let m="force-dynamic";async function y(e){try{await (0,u.Z)();let{searchParams:t}=new URL(e.url),r="true"===t.get("shared_package_available"),i={};r&&(i.shared_package_availability=!0);let a=await c.Z.find(i).populate("category_id").populate("amenities").populate("features").lean(),n=e=>{if(!e)return 0;if("number"==typeof e)return e;if("string"==typeof e)return parseFloat(e.replace(/[^0-9.]/g,""))||0;if("object"==typeof e){if(e.price_range&&e.price_range.min)return parseFloat(e.price_range.min)||0;if(e.min)return parseFloat(e.min)||0;if(e.toString)return parseFloat(e.toString())||0;if(e.$numberInt)return parseInt(e.$numberInt);if(e.$numberLong)return parseFloat(e.$numberLong);if(e.$numberDouble)return parseFloat(e.$numberDouble)}return 0},o=e=>{if(!e)return null;let t=e.price_range?e.price_range:e;if("object"==typeof t&&t.min&&t.max){let e=parseFloat(t.min),r=parseFloat(t.max);return e===r?`₹${e.toLocaleString()}`:`₹${e.toLocaleString()} - ₹${r.toLocaleString()}`}let r=n(e);return r?`₹${r.toLocaleString()}`:null},l=a.map(e=>({...e,id:e._id.toString(),categorySlug:e.category_id?.slug||e.categorySlug||"premium",amenities:e.amenities?.map(e=>e.name)||[],features:e.features?.map(e=>e.name)||[],badges:e.badges||[],scenicRoutes:e.scenicRoutes||[],maxGuests:e.capacity_adults||e.maxGuests||0,pricePerNight:n(e.price_override)||n(e.category_id?.base_price)||0,displayPrice:o(e.price_override)||o(e.category_id?.base_price)||"Price on Request",images:e.images||{},description:e.description||e.shortPitch||"No description available.",isAvailable:"active"===e.status,shared_package_availability:e.shared_package_availability||!1}));return s.Z.json(l)}catch(e){return console.error("Failed to fetch houseboats:",e),s.Z.json({error:"Failed to fetch houseboats"},{status:500})}}let S=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/houseboats/route",pathname:"/api/houseboats",filename:"route",bundlePath:"app/api/houseboats/route"},resolvedPagePath:"/Users/failasbasheer/Downloads/alleppey-luxury-houseboats/app/api/houseboats/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:h,staticGenerationAsyncStorage:b,serverHooks:f,headerHooks:_,staticGenerationBailout:v}=S,x="/api/houseboats/route";function q(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:b})}},7033:(e,t,r)=>{r.d(t,{Z:()=>s});var i=r(1185),a=r.n(i);let n=process.env.MONGO_URI;if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let o=global.mongoose;o||(o=global.mongoose={conn:null,promise:null});let s=async function(){if(o.conn)return o.conn;o.promise||(o.promise=a().connect(n,{bufferCommands:!1}).then(e=>e));try{o.conn=await o.promise}catch(e){throw o.promise=null,e}return o.conn}},6659:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(1185),a=r.n(i);let n=new i.Schema({slug:{type:String,required:!0,unique:!0},display_name:{type:String,required:!0},base_price:{type:Number,required:!0},is_active:{type:Boolean,default:!0},name:{type:String,required:!0},seoTitle:String,tagline:String,shortPitch:String,description:String,secondaryDescription:String,duration:String,guestCapacity:String,imagePlaceholder:String,amenitiesList:[i.Schema.Types.Mixed],audience:[String],badges:[String],bookingInfo:i.Schema.Types.Mixed,crew:i.Schema.Types.Mixed,deck:i.Schema.Types.Mixed,dining:i.Schema.Types.Mixed,faqs:[i.Schema.Types.Mixed],features:[String],gallery:[i.Schema.Types.Mixed],highlights:[String],journeyFlow:[i.Schema.Types.Mixed],pricing:i.Schema.Types.Mixed,reviews:[i.Schema.Types.Mixed],scenicRoutes:[i.Schema.Types.Mixed],startingPoint:i.Schema.Types.Mixed,stats:i.Schema.Types.Mixed,trustSignals:[String]},{timestamps:!0,strict:!1}),o=a().models?.Category||a().model("Category",n)},1452:(e,t,r)=>{r.d(t,{Z:()=>o});var i=r(1185),a=r.n(i);let n=new(a()).Schema({name:{type:String,required:!0},slug:{type:String,unique:!0,required:!0},category_id:{type:a().Schema.Types.ObjectId,ref:"Category",required:!0},status:{type:String,enum:["active","maintenance","decommissioned"],default:"active"},bedrooms:{type:Number,required:!0,default:1},capacity_adults:{type:Number,required:!0,default:2},capacity_children:{type:Number,default:0},has_ac:{type:Boolean,default:!0},cruise_hours:{type:Number,default:22},price_override:{type:Number},shared_package_availability:{type:Boolean,default:!1},images:{hero:{type:String,required:!0},exterior:String,interior:String,bedroom:String,dining:String,bathroom:String,extra1:String,extra2:String,extra3:String,gallery:[String]},notes:String,amenities:[{type:a().Schema.Types.ObjectId,ref:"Amenity"}],features:[{type:a().Schema.Types.ObjectId,ref:"Feature"}],tagline:String,shortPitch:String,description:String,secondaryDescription:String,badges:[String],crew:{size:{type:Number,default:3},roles:[String]},dining:{cuisineTypes:[String],isPrivate:{type:Boolean,default:!1},wineSommelier:Boolean},deck:{type:{type:String,default:"Upper Deck"},seating:String},journeyFlow:[String],scenicRoutes:[{name:String,duration:String,highlights:String}]},{timestamps:!0}),o=a().models.Houseboat||a().model("Houseboat",n)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[638,206],()=>r(9373));module.exports=i})();